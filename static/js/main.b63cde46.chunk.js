(this["webpackJsonpsapp-balances"]=this["webpackJsonpsapp-balances"]||[]).push([[0],{133:function(e,t,n){e.exports=n(186)},138:function(e,t,n){},140:function(e,t,n){},186:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(11),s=n.n(c),o=(n(138),n(8)),u=n.n(o),l=n(14),i=n(24),p=(n(140),n(23)),d=n(112),f=n(106),m=n(230),b=n(232),v=n(233),k=n(234),x=n(105),h=n(4),g=n(113),w=n.n(g),O=a.a.createContext(new w.a),E=function(){return a.a.useContext(O)},j=p.Contract.getInterface(["function name() view returns (string)","function symbol() view returns (string)","function decimals() view returns (uint256)","function balanceOf(address) view returns (uint)","function transfer(address to, uint amount)"]),y="sapp_balances_token_repo.token_cache.",C="sapp_balances_token_repo.tracked_tokens",S={address:"",symbol:"ETH",decimals:18},A=function(){var e=Object(l.a)(u.a.mark((function e(t,n){var r,a,c,s,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==n){e.next=2;break}return e.abrupt("return",S);case 2:if(r=p.utils.getAddress(n),a=localStorage.getItem(y+r))try{c=JSON.parse(a)}catch(u){localStorage.removeItem(y+r)}if(c){e.next=13;break}return e.next=8,T(t,r,"symbol");case 8:return s=e.sent[0],e.next=11,T(t,r,"decimals");case 11:o=e.sent[0],c={address:r,symbol:s,decimals:o};case 13:return localStorage.setItem(y+r,JSON.stringify(c)),e.abrupt("return",c);case 15:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),I=function(){var e=Object(l.a)(u.a.mark((function e(t,n,r){var a,c,s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=p.utils.getAddress(r),""!==n){e.next=6;break}return e.next=4,t.getBalance({params:[r]});case 4:return c=e.sent,e.abrupt("return",c);case 6:return s=p.utils.getAddress(n),e.next=9,T(t,s,"balanceOf",[a]);case 9:return e.abrupt("return",e.sent[0]);case 10:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),T=function(){var e=Object(l.a)(u.a.mark((function e(t,n,r,a){var c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.call({params:[{to:n,data:j.encodeFunctionData(r,a)}]});case 2:return c=e.sent,e.abrupt("return",j.decodeFunctionResult(r,c));case 4:case"end":return e.stop()}}),e)})));return function(t,n,r,a){return e.apply(this,arguments)}}(),_=function(){var e=Object(l.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:localStorage.setItem(C,JSON.stringify(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),J=function(){var e=Object(l.a)(u.a.mark((function e(){var t,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=localStorage.getItem(C),n={"":""},t)try{n=JSON.parse(t)}catch(r){localStorage.removeItem(C)}return e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),N=function(){var e=Object(l.a)(u.a.mark((function e(t){var n,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,J();case 2:if(n=e.sent,!((r=p.utils.getAddress(t))in n)){e.next=6;break}return e.abrupt("return");case 6:n[r]="",_(n);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),F=function(){var e=Object(l.a)(u.a.mark((function e(t,n,r){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==t){e.next=2;break}return e.abrupt("return",{to:n,value:r.toHexString(),data:"0x"});case 2:return e.abrupt("return",{to:t,value:"0",data:j.encodeFunctionData("transfer",[n,r])});case 3:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),B=n(236),D=n(225),P=n(226),H=n(227),R=n(111),U=n(231),W=Object(d.a)({remove:{margin:"16px"},item:{flex:1}}),z=Object(h.a)(W)((function(e){var t=e.open,n=e.tokenAddress,a=e.onClose,c=E(),s=r.useState(void 0),o=Object(i.a)(s,2),d=o[0],f=o[1],m=r.useState(""),b=Object(i.a)(m,2),v=b[0],k=b[1],h=r.useState(""),g=Object(i.a)(h,2),w=g[0],O=g[1],j=r.useCallback((function(){f(void 0),k(""),O(""),a()}),[a,k,f,O]),y=r.useCallback(Object(l.a)(u.a.mark((function e(){var t,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(d){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,t=p.utils.parseUnits(w,d.decimals),e.next=6,F(d.address,p.utils.getAddress(v),t);case 6:return n=e.sent,e.next=9,c.txs.send({txs:[n]});case 9:j(),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),console.error(e.t0);case 15:case"end":return e.stop()}}),e,null,[[2,12]])}))),[c,v,d,w,j]);return r.useEffect((function(){(function(){var e=Object(l.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=f,e.next=3,A(c.eth,n);case 3:e.t1=e.sent,(0,e.t0)(e.t1);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[n]),r.createElement(B.a,{open:t,onClose:j,scroll:"paper","aria-labelledby":"scroll-dialog-title","aria-describedby":"scroll-dialog-description"},r.createElement(D.a,{id:"scroll-dialog-title"},"Send ",(null===d||void 0===d?void 0:d.symbol)||""),r.createElement(P.a,{dividers:!0},r.createElement(H.a,{id:"scroll-dialog-description",tabIndex:-1},r.createElement(R.a,{label:"Receiver",onChange:function(e){k(e.target.value)}},n),r.createElement("br",null),r.createElement(R.a,{label:"Amount",onChange:function(e){O(e.target.value)}},n))),r.createElement(U.a,null,r.createElement(x.a,{onClick:j,color:"default"},"Cancel"),r.createElement(x.a,{onClick:y,color:"primary"},"Send")))})),K=Object(d.a)({remove:{margin:"16px"},item:{flex:1}}),L=Object(h.a)(K)((function(e){var t=e.open,n=e.onClose,a=E(),c=r.useState(""),s=Object(i.a)(c,2),o=s[0],p=s[1],d=r.useCallback((function(){p(""),n()}),[n,p]),f=r.useCallback(Object(l.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,A(a.eth,o);case 3:return e.next=5,N(o);case 5:d(),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])}))),[a,o,p,d]);return r.createElement(B.a,{open:t,onClose:d,scroll:"paper","aria-labelledby":"scroll-dialog-title","aria-describedby":"scroll-dialog-description"},r.createElement(D.a,{id:"scroll-dialog-title"},"Add a Token"),r.createElement(P.a,{dividers:!0},r.createElement(H.a,{id:"scroll-dialog-description",tabIndex:-1},r.createElement(R.a,{label:"Token address",onChange:function(e){p(e.target.value)}},o))),r.createElement(U.a,null,r.createElement(x.a,{onClick:d,color:"default"},"Cancel"),r.createElement(x.a,{onClick:f,color:"primary"},"Add")))})),M=Object(d.a)({list:{},content:{},itemText:{textAlign:"end"}}),$=Object(h.a)(M)((function(e){var t=e.classes,n=E(),c=Object(r.useState)(!1),s=Object(i.a)(c,2),o=s[0],d=s[1],h=Object(r.useState)(void 0),g=Object(i.a)(h,2),w=g[0],O=g[1],j=Object(r.useState)([]),y=Object(i.a)(j,2),C=y[0],S=y[1],T=a.a.useCallback(Object(l.a)(u.a.mark((function e(){var t,r,a,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,console.log("LOAD TOKENS"),e.next=4,J();case 4:return t=e.sent,e.next=7,Promise.all(Object.entries(t).map(function(){var e=Object(l.a)(u.a.mark((function e(t){var r,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object(i.a)(t,1),a=r[0],e.next=3,A(n.eth,a);case 3:return e.t0=e.sent,e.abrupt("return",{token:e.t0});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 7:return r=e.sent,S(r),e.next=11,n.getSafeInfo();case 11:return a=e.sent,e.next=14,Promise.all(r.map(function(){var e=Object(l.a)(u.a.mark((function e(t){var r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,console.log(t.token.address,a.safeAddress),e.next=4,I(n.eth,t.token.address,a.safeAddress);case 4:r=e.sent,t.balance=p.utils.formatUnits(r,t.token.decimals),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0);case 11:return e.abrupt("return",t);case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()));case 14:c=e.sent,S(c),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(0),console.error(e.t0);case 21:case"end":return e.stop()}}),e,null,[[0,18]])}))),[n]);return a.a.useEffect((function(){T()}),[T]),C.length<1?a.a.createElement(f.a,null):a.a.createElement(a.a.Fragment,null,a.a.createElement(m.a,null,C.map((function(e){return a.a.createElement(b.a,{button:!0,onClick:function(){return O(e.token)}},a.a.createElement(v.a,null,a.a.createElement("img",{width:40,height:40,src:"https://gnosis-safe-token-logos.s3.amazonaws.com/".concat(e.token.address,".png")})),a.a.createElement(k.a,{className:t.itemText,primary:"".concat(e.balance||"0"," ").concat(e.token.symbol)}))})),a.a.createElement(b.a,null,a.a.createElement(x.a,{onClick:function(){return d(!0)}},"Add Token"))),a.a.createElement(L,{open:o,onClose:function(){d(!1),T()}}),a.a.createElement(z,{open:!!w,tokenAddress:(null===w||void 0===w?void 0:w.address)||"",onClose:function(){return O(void 0)}}))}));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var q=n(87),G=n(117);s.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(q.ThemeProvider,{theme:G.theme},a.a.createElement($,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[133,1,2]]]);
//# sourceMappingURL=main.b63cde46.chunk.js.map