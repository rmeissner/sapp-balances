(this["webpackJsonpsapp-balances"]=this["webpackJsonpsapp-balances"]||[]).push([[0],{148:function(e,t,n){e.exports=n(185)},153:function(e,t,n){},155:function(e,t,n){},164:function(e,t){},185:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(17),o=n.n(c),s=(n(153),n(4)),l=n.n(s),u=n(18),i=n(25),d=(n(155),n(29)),p=n(120),f=n(232),m=n(234),b=n(235),v=n(236),k=n(113),x=n(112),h=n(9),g=n(239),E=n(121),w=n.n(E),O=a.a.createContext(new w.a),j=function(){return a.a.useContext(O)},y=d.Contract.getInterface(["function name() view returns (string)","function symbol() view returns (string)","function decimals() view returns (uint256)","function balanceOf(address) view returns (uint)","function transfer(address to, uint amount)"]),C="sapp_balances_token_repo.token_cache.",S="sapp_balances_token_repo.tracked_tokens",A={address:"",symbol:"ETH",decimals:18},I=function(){var e=Object(u.a)(l.a.mark((function e(t,n){var r,a,c,o,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==n){e.next=2;break}return e.abrupt("return",A);case 2:if(r=d.utils.getAddress(n),a=localStorage.getItem(C+r))try{c=JSON.parse(a)}catch(l){localStorage.removeItem(C+r)}if(c){e.next=13;break}return e.next=8,_(t,r,"symbol");case 8:return o=e.sent[0],e.next=11,_(t,r,"decimals");case 11:s=e.sent[0],c={address:r,symbol:o,decimals:s};case 13:return localStorage.setItem(C+r,JSON.stringify(c)),e.abrupt("return",c);case 15:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),T=function(){var e=Object(u.a)(l.a.mark((function e(t,n,r){var a,c,o;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=d.utils.getAddress(r),""!==n){e.next=6;break}return e.next=4,t.getBalance([r]);case 4:return c=e.sent,e.abrupt("return",c);case 6:return o=d.utils.getAddress(n),e.next=9,_(t,o,"balanceOf",[a]);case 9:return e.abrupt("return",e.sent[0]);case 10:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),_=function(){var e=Object(u.a)(l.a.mark((function e(t,n,r,a){var c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.call([{to:n,data:y.encodeFunctionData(r,a)}]);case 2:return c=e.sent,e.abrupt("return",y.decodeFunctionResult(r,c));case 4:case"end":return e.stop()}}),e)})));return function(t,n,r,a){return e.apply(this,arguments)}}(),F=function(){var e=Object(u.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:localStorage.setItem(S,JSON.stringify(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),J=function(){var e=Object(u.a)(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=localStorage.getItem(S),n={"":""},t)try{n=JSON.parse(t)}catch(r){localStorage.removeItem(S)}return e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),N=function(){var e=Object(u.a)(l.a.mark((function e(t){var n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,J();case 2:if(n=e.sent,!((r=d.utils.getAddress(t))in n)){e.next=6;break}return e.abrupt("return");case 6:n[r]="",F(n);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),B=function(){var e=Object(u.a)(l.a.mark((function e(t){var n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,J();case 2:if(n=e.sent,(r=d.utils.getAddress(t))in n){e.next=6;break}return e.abrupt("return");case 6:delete n[r],F(n);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),D=function(){var e=Object(u.a)(l.a.mark((function e(t,n,r){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==t){e.next=2;break}return e.abrupt("return",{to:n,value:r.toHexString(),data:"0x"});case 2:return e.abrupt("return",{to:t,value:"0",data:y.encodeFunctionData("transfer",[n,r])});case 3:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),P=n(238),R=n(227),H=n(228),M=n(229),U=n(119),W=n(233),z=Object(p.a)({remove:{margin:"16px"},item:{flex:1}}),$=Object(h.a)(z)((function(e){var t=e.open,n=e.tokenAddress,a=e.onClose,c=j(),o=r.useState(void 0),s=Object(i.a)(o,2),p=s[0],f=s[1],m=r.useState(""),b=Object(i.a)(m,2),v=b[0],k=b[1],h=r.useState(""),g=Object(i.a)(h,2),E=g[0],w=g[1],O=r.useCallback((function(){f(void 0),k(""),w(""),a()}),[a,k,f,w]),y=r.useCallback(Object(u.a)(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(p){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,t=d.utils.parseUnits(E,p.decimals),e.next=6,D(p.address,d.utils.getAddress(v),t);case 6:return n=e.sent,e.next=9,c.txs.send({txs:[n]});case 9:O(),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),console.error(e.t0);case 15:case"end":return e.stop()}}),e,null,[[2,12]])}))),[c,v,p,E,O]);return r.useEffect((function(){(function(){var e=Object(u.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=f,e.next=3,I(c.eth,n);case 3:e.t1=e.sent,(0,e.t0)(e.t1);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[n]),r.createElement(P.a,{open:t,onClose:O,scroll:"paper","aria-labelledby":"scroll-dialog-title","aria-describedby":"scroll-dialog-description"},r.createElement(R.a,{id:"scroll-dialog-title"},"Send ",(null===p||void 0===p?void 0:p.symbol)||""),r.createElement(H.a,{dividers:!0},r.createElement(M.a,{id:"scroll-dialog-description",tabIndex:-1},r.createElement(U.a,{label:"Receiver",onChange:function(e){k(e.target.value)}},n),r.createElement("br",null),r.createElement(U.a,{label:"Amount",onChange:function(e){w(e.target.value)}},n))),r.createElement(W.a,null,r.createElement(x.a,{onClick:O,color:"default"},"Cancel"),r.createElement(x.a,{onClick:y,color:"primary"},"Send")))})),q=Object(p.a)({remove:{margin:"16px"},item:{flex:1}}),G=Object(h.a)(q)((function(e){var t=e.open,n=e.onClose,a=j(),c=r.useState(""),o=Object(i.a)(c,2),s=o[0],d=o[1],p=r.useCallback((function(){d(""),n()}),[n,d]),f=r.useCallback(Object(u.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,I(a.eth,s);case 3:return e.next=5,N(s);case 5:p(),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])}))),[a,s,d,p]);return r.createElement(P.a,{open:t,onClose:p,scroll:"paper","aria-labelledby":"scroll-dialog-title","aria-describedby":"scroll-dialog-description"},r.createElement(R.a,{id:"scroll-dialog-title"},"Add a Token"),r.createElement(H.a,{dividers:!0},r.createElement(M.a,{id:"scroll-dialog-description",tabIndex:-1},r.createElement(U.a,{label:"Token address",onChange:function(e){d(e.target.value)}},s))),r.createElement(W.a,null,r.createElement(x.a,{onClick:p,color:"default"},"Cancel"),r.createElement(x.a,{onClick:f,color:"primary"},"Add")))})),K=Object(p.a)({remove:{margin:"16px"},item:{flex:1}}),L=Object(h.a)(K)((function(e){var t=e.token,n=e.onClose,a=j(),c=r.useCallback(Object(u.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,B(t.address);case 5:n(),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[2,8]])}))),[a,t,n]);return r.createElement(P.a,{open:!!(null===t||void 0===t?void 0:t.address),onClose:n,scroll:"paper","aria-labelledby":"scroll-dialog-title","aria-describedby":"scroll-dialog-description"},r.createElement(R.a,{id:"scroll-dialog-title"},"Send ",(null===t||void 0===t?void 0:t.symbol)||""),r.createElement(H.a,{dividers:!0},r.createElement(M.a,{id:"scroll-dialog-description",tabIndex:-1},"Are you sure that you want to remove ",null===t||void 0===t?void 0:t.symbol,r.createElement("br",null),r.createElement("br",null),r.createElement("b",null,"Address:"),r.createElement("br",null),null===t||void 0===t?void 0:t.address.slice(0,21),r.createElement("br",null),null===t||void 0===t?void 0:t.address.slice(21))),r.createElement(W.a,null,r.createElement(x.a,{onClick:n,color:"default"},"Cancel"),r.createElement(x.a,{onClick:c,color:"primary"},"Remove")))})),Q=Object(p.a)({list:{},content:{},itemText:{textAlign:"end"}}),V=function(e){var t=e.tokenAddress,n=Object(r.useState)(!1),c=Object(i.a)(n,2),o=c[0],s=c[1],l="https://gnosis-safe-token-logos.s3.amazonaws.com/".concat(t,".png");return o?a.a.createElement(a.a.Fragment,null):a.a.createElement("img",{width:40,height:40,src:l,onError:function(){return s(!0)}})},X=Object(h.a)(Q)((function(e){var t=e.classes,n=j(),c=Object(r.useState)(!1),o=Object(i.a)(c,2),s=o[0],p=o[1],h=Object(r.useState)(!1),E=Object(i.a)(h,2),w=E[0],O=E[1],y=Object(r.useState)(void 0),C=Object(i.a)(y,2),S=C[0],A=C[1],_=Object(r.useState)(void 0),F=Object(i.a)(_,2),N=F[0],B=F[1],D=Object(r.useState)([]),P=Object(i.a)(D,2),R=P[0],H=P[1],M=a.a.useCallback(Object(u.a)(l.a.mark((function e(){var t,r,a,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,J();case 3:return t=e.sent,e.next=6,Promise.all(Object.entries(t).map(function(){var e=Object(u.a)(l.a.mark((function e(t){var r,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object(i.a)(t,1),a=r[0],e.next=3,I(n.eth,a);case 3:return e.t0=e.sent,e.abrupt("return",{token:e.t0});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 6:return r=e.sent,e.next=9,n.safe.getInfo();case 9:return a=e.sent,e.next=12,Promise.all(r.map(function(){var e=Object(u.a)(l.a.mark((function e(t){var r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,console.log(t.token.address,a.safeAddress),e.next=4,T(n.eth,t.token.address,a.safeAddress);case 4:r=e.sent,t.balance=d.utils.formatUnits(r,t.token.decimals),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0);case 11:return e.abrupt("return",t);case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()));case 12:c=e.sent,H(c),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(0),console.error(e.t0);case 19:case"end":return e.stop()}}),e,null,[[0,16]])}))),[n]);return a.a.useEffect((function(){var e=void 0,t=function(){var n=Object(u.a)(l.a.mark((function n(){return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,M();case 2:e=setTimeout(t,1e4);case 3:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();return t(),function(){e&&clearTimeout(e)}}),[M]),a.a.createElement(a.a.Fragment,null,a.a.createElement(f.a,null,R.map((function(e){return a.a.createElement(m.a,{button:!(w&&!e.token.address),onClick:function(){return w?B(e.token):A(e.token)}},!w&&a.a.createElement(b.a,null,a.a.createElement(V,{tokenAddress:e.token.address})),w&&!!e.token.address&&a.a.createElement(b.a,{style:{width:24,height:24,padding:8}},a.a.createElement(g.a,null)),a.a.createElement(v.a,{className:t.itemText,primary:"".concat(e.balance||"0"," ").concat(e.token.symbol)}))})),0===R.length&&a.a.createElement(m.a,null,a.a.createElement(k.a,null)),w&&a.a.createElement(a.a.Fragment,null,a.a.createElement(m.a,null,a.a.createElement(x.a,{onClick:function(){return p(!0)}},"Add Token")),a.a.createElement(m.a,null,a.a.createElement(x.a,{onClick:function(){return O(!1)}},"Done"))),!w&&a.a.createElement(m.a,null,a.a.createElement(x.a,{onClick:function(){return O(!0)}},"Manage Tokens"))),a.a.createElement(G,{open:s,onClose:function(){p(!1),M(),O(!1)}}),a.a.createElement($,{open:!!S,tokenAddress:(null===S||void 0===S?void 0:S.address)||"",onClose:function(){return A(void 0)}}),a.a.createElement(L,{token:N,onClose:function(){B(void 0),M(),O(!1)}}))}));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Y=n(91),Z=n(131);o.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(Y.ThemeProvider,{theme:Z.theme},a.a.createElement(X,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[148,1,2]]]);
//# sourceMappingURL=main.c1d36d6f.chunk.js.map